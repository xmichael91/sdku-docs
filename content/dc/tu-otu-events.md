---
title: "Команды ТУ/ОТУ. Формат событий"
date: 2019-12-13T16:09:28+03:00
code: 19120001
draft: true
---

## События от Сервера ДЦ к Шлюзу ДЦ

### Команды ТУ ЭЦ-ЕМ
| Константа  | Номер  | Описание |
|:------------- |:---------------:| :-------------:|
| RES_ID_COMPLECT_ECEM     | 9101 | --- |
| EVT_ID_EXECUTE_CMD       |301 | ---  |
| PAR_ID_ID_PCOMPLEX | 154   | (int) Идентификатор программного комплекса |
| PAR_ID_ID_PCOMPLEX_APP |155  |(int) Идентификатор приложения | 
| PAR_ID_ACTIVITY  |401  |(short) активность приложения-источника | 
| PAR_ID_CODE_CONTROLAREA|3048  |(String) код ДЦ региона управления (латинские буквы UTF-8) | 
| PAR_ID_CODE| 102 |(byte[]) код команды ЭЦ-ЕМ в символах US-ASCII|
| PAR_ID_TIMESTAMP| 100 | (timespec) время формирования команды на посту ДЦ, должно храниться и передаваться через все этапы выполнения команды |
--- переложить в dcughub/dcugchlgate из исходного события ---
### Команды ОТУ ЭЦ-ЕМ
| Константа  | Номер  | Описание |
|:------------- |:---------------:| :-------------:|
| RES_ID_COMPLECT_ECEM | 9101 | --- |
|EVT_ID_EXECUTE_OTU_CMD | 312 | --- |
|PAR_ID_ID_PCOMPLEX |154| (int) Идентификатор программного комплекса |
| PAR_ID_ID_PCOMPLEX_APP |155  |(int) Идентификатор приложения |
| PAR_ID_ACTIVITY  |401  |(short) активность приложения-источника |
| PAR_ID_CODE_CONTROLAREA|3048  |(String) код ДЦ региона управления (латинские буквы UTF-8) | 
|PAR_ID_CODE | 102 |(byte[]) код команды ОТУ ЭЦ-ЕМ в символах US-ASCI   |
| PAR_ID_TIMESTAMP| 100 | (timespec) время формирования команды на посту ДЦ, должно храниться и передаваться через все этапы выполнения команды |
### Ответ ТУ
| Константа  | Номер  | Описание |
|:------------- |:---------------:| :-------------:|
| RES_ID_COMPLECT_ECEM | 9101 | --- |
|EVT_ID_COMMAND_DIAGNOSTIC_DC| 803 | --- |
|PAR_ID_ID_PCOMPLEX |154| (int) Идентификатор программного комплекса |
| PAR_ID_ID_PCOMPLEX_APP |155  |(int) Идентификатор приложения |
| PAR_ID_ACTIVITY  |401  |(short) активность приложения-источника |
| PAR_ID_CODE_CONTROLAREA|3048  |(String) код ДЦ региона управления (латинские буквы UTF-8) | 
|PAR_ID_CODE | 102 |(byte[]) код команды ОТУ ЭЦ-ЕМ в символах US-ASCI   |
| PAR_ID_TIMESTAMP| 100 | (timespec) время формирования команды на посту ДЦ, должно храниться и передаваться через все этапы выполнения команды |
|PAR_ID_STAGE |213|(short) стадия выполнения команды|
**--- уровень шлюза ЦП ---**

1 — передана в канал (CMD_STATUS_SENT_IN_CHANNEL)

2 — не передана в канал (CMD_STATUS_NOT_SENT_IN_CHANNEL)

**--- уровень шлюза ЛП ---**

3 — принята из канала ОК (CMD_STATUS_RECEIVED_FROM_CHANNEL)

**--- уровень взаимодействия с подсистемой ЭЦ-ЕМ ---**

**КСУ:**

4 – КСУ занят (CMD_STATUS_KSU_BUSY)

5 – КСУ занят (повтор команды) (CMD_STATUS_KSU_BUSY_CMD_DUPLICATE)

6 — КСУ принял (CMD_STATUS_KSU_ACCEPTED)

7 — нет ответа от КСУ (CMD_STATUS_KSU_NO_ANSWER)

8 — КСУ ожидает ответ от УВК (CMD_STATUS_KSU_WAIT_UVK)

**УВК:**

9 — принята УВК (CMD_STATUS_UVK_ACCEPTED)

10 — отклонена УВК (CMD_STATUS_UVK_REJECTED)

11 – нет ответа от УВК (CMD_STATUS_UVK_NO_ANSWER)
