---
title: "Команды ТУ/ОТУ. Формат событий"
date: 2019-12-13T16:09:28+03:00
code: 19121300
draft: true
---

# События от Сервера ДЦ к Шлюзу ДЦ

## Команды ТУ ЭЦ-ЕМ
| Номер |                        Константа                        |                                                       Описание                                                        |
|:------|:-------------------------------------------------------|:---------------------------------------------------------------------------------------------------------------------|
| 9101  |                  RES_ID_COMPLECT_ECEM                   |                                                          ---                                                          |
| 301   |                   EVT_ID_EXECUTE_CMD                    |                                                          ---                                                          |
| 154   |                   PAR_ID_ID_PCOMPLEX                    |                                      (int) идентификатор программного комплекса                                       |
| 155   |                 PAR_ID_ID_PCOMPLEX_APP                  |                                            (int) идентификатор приложения                                             |
| 401   |                     PAR_ID_ACTIVITY                     |                                        (short) активность приложения-источника                                        |
| 3048  |                 PAR_ID_CODE_CONTROLAREA                 |                              (String) код ДЦ региона управления (латинские буквы UTF-8)                               |
| 102   |                       PAR_ID_CODE                       |                                    (byte[]) код команды ЭЦ-ЕМ в символах US-ASCII                                     |
|       |  |  **ПЕРЕЛОЖИТЬ В `dcughub/dcugchlgate` ИЗ ИСХОДНОГО СОБЫТИЯ**                                                  |
| 100   |                    PAR_ID_TIMESTAMP                     | (timespec) время формирования команды на посту ДЦ, должно храниться и передаваться через все этапы выполнения команды |
## Команды ОТУ ЭЦ-ЕМ
| Номер |        Константа        |                                                       Описание                                                        |
|:------|:-----------------------|:---------------------------------------------------------------------------------------------------------------------|
| 9101  |  RES_ID_COMPLECT_ECEM   |                                                          ---                                                          |
| 312   | EVT_ID_EXECUTE_OTU_CMD  |                                                          ---                                                          |
| 154   |   PAR_ID_ID_PCOMPLEX    |                                      (int) идентификатор программного комплекса                                       |
| 155   | PAR_ID_ID_PCOMPLEX_APP  |                                            (int) идентификатор приложения                                             |
| 401   |     PAR_ID_ACTIVITY     |                                        (short) активность приложения-источника                                        |
| 3048  | PAR_ID_CODE_CONTROLAREA |                              (String) код ДЦ региона управления (латинские буквы UTF-8)                               |
| 102   |       PAR_ID_CODE       |                                   (byte[]) код команды ОТУ ЭЦ-ЕМ в символах US-ASCI                                   |
| 100   |    PAR_ID_TIMESTAMP     | (timespec) время формирования команды на посту ДЦ, должно храниться и передаваться через все этапы выполнения команды |
## Ответ ТУ
| Номер |          Константа           |                                                       Описание                                                        |
|:------|:----------------------------|:---------------------------------------------------------------------------------------------------------------------|
| 9101  |     RES_ID_COMPLECT_ECEM     |                                                          ---                                                          |
| 803   | EVT_ID_COMMAND_DIAGNOSTIC_DC |                                                          ---                                                          |
| 154   |      PAR_ID_ID_PCOMPLEX      |                                      (int) идентификатор программного комплекса                                       |
| 155   |    PAR_ID_ID_PCOMPLEX_APP    |                                            (int) идентификатор приложения                                             |
| 401   |       PAR_ID_ACTIVITY        |                                        (short) активность приложения-источника                                        |
| 3048  |   PAR_ID_CODE_CONTROLAREA    |                              (String) код ДЦ региона управления (латинские буквы UTF-8)                               |
| 102   |         PAR_ID_CODE          |                                   (byte[]) код команды ОТУ ЭЦ-ЕМ в символах US-ASCI                                   |
| 100   |       PAR_ID_TIMESTAMP       | (timespec) время формирования команды на посту ДЦ, должно храниться и передаваться через все этапы выполнения команды |
| 213   |         PAR_ID_STAGE         |                                           (short) стадия выполнения команды                                           |

## Стадия выполнения команды
| Номер    |                   Константа                    |         Описание         |
|:---------|:----------------------------------------------|:------------------------|
|          |              **УРОВЕНЬ ШЛЮЗА ЦП**              |                          |
| 1        |           CMD_STATUS_SENT_IN_CHANNEL           |     передана в канал     |
| 2        |         CMD_STATUS_NOT_SENT_IN_CHANNEL         |   не передана в канал    |
|          |              **УРОВЕНЬ ШЛЮЗА ЛП**              |                          |
| 3        |        CMD_STATUS_RECEIVED_FROM_CHANNEL        |   принята из канала ОК   |
|          | **УРОВЕНЬ ВЗАИМОДЕЙСТВИЯ С ПОДСИСТЕМОЙ ЭЦ-ЕМ** |                          |
| **КСУ:** |                                                |                          | 
| 4        |              CMD_STATUS_KSU_BUSY               |        КСУ занят         |
| 5        |       CMD_STATUS_KSU_BUSY_CMD_DUPLICATE        |        КСУ занят         |
| 6        |            CMD_STATUS_KSU_ACCEPTED             |        КСУ принял        |
| 7        |            CMD_STATUS_KSU_NO_ANSWER            |    нет ответа от КСУ     |
| 8        |            CMD_STATUS_KSU_WAIT_UVK             | КСУ ожидает ответ от УВК |
| **УВК:** |                                                |                          |
| 9        |            CMD_STATUS_UVK_ACCEPTED             |       принята УВК        |
| 10       |            CMD_STATUS_UVK_REJECTED             |      отклонена УВК       |
| 11       |            CMD_STATUS_UVK_NO_ANSWER            |    нет ответа от УВК     |
