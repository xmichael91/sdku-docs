---
title: "Стиль кода Java"
code: 20021300
draft: true
---

Существуют как обязательные требования, так и рекомендации по оформлению Java-кода.
Ключевое требование - оформление должно быть **единообразным** в рамках проекта или группы взаимосвязанных проектов.

## Отступы и пропуски строк

* Отступ от начала предыдущей строки равняется четырём пробелам.
* Одна пустая линия должна разделять:
    * Методы
    * Локальные переменные в методе и первое выражение
    * Блок или отдельную строку комментариев
    * Логически разделенные части в методе, чтобы улучшить читабельность

## Расстановка скобок

* Рекомендуется расстановка фигурных скобок в стиле C, но допускается использование "Египетского" стиля. Основное требование - единообразный подход во всём проекте.

```Java
/* Стиль C - рекомендуется */
class MyClass
{
    int foo() 
    {
        makeStuff();

        if (isSomeFlag())
        {
            makeAnotherStuff();
        }
    }
}

/* Египетский стиль - допускается */
class MyClass
{
    int foo() {
        makeStuff();

        if (isSomeFlag()) {
            makeAnotherStuff();
        }
    }
}
```

* Допускается расстановка открывающей и закрывающей скобки на одной строке для пустых методов

```Java
public void doNothing() {}
```

## Форматирование строк, длина операторов/выражений

* Максимальная длина строки равна 120 символам. Если аргументы метода не помещаются на одной строке, их следует разбивать на несколько строк; новую строку следует начинать на одну позицию правее открывающей скобки списка аргументов.

```Java
// Правильно
int lotsOfArgs(int a_integer, long a_long, short a_short,
               double a_double, float a_float, String a_string);
// Неправильно
int lotsOfArgs(int a_integer, long a_long, short a_short, double a_double, float a_float, String a_string);

```

* В сложных выражениях размещайте каждое условие на отдельной строке.

```Java
// Правильно
if ((('0' <= inChar) && (inChar <= '9'))
 || (('а' <= inChar) && (inChar <= 'z'))
 || (('A' <= inСhar) && (inСhar <= 'Z'))) 
{
    /* .... */
}

// Неправильно
if ((('0' <= inChar) && (inChar <= '9')) || (( 'а' <= inChar) && (inChar <= 'z')) || (( 'A' <=  inСhar) && (inСhar <= 'Z'))) 
{
    /* .... */
}
```

* Всегда располагайте один оператор на строке.

```Java
// Правильно
a = b + 1;
c++;

// Неправильно
a = b + 1; c++;
```

## Операторы `if/else`, `do`, `while`, `for`

* Тело операторов `if`, `else if`, `do`, `while`, `for` необходимо **всегда** выделять фигурными скобками, а перед каждым оператором ставить отступ – четыре пробела.

```Java
// Правильно
if (x == y) 
{
    makeSomeStuff();
    makeSomeOtherStuff(); 
} 
else 
if (x > y) 
{
    singleLine();
} 
else 
{
    doThis();
    doThat();
}

for (int i = 0; i < 10; i++) 
{
    statements; 
}

// Неправильно
if (x == y) {
makeSomeStuff();
makeSomeOtherStuff(); 
}
else 
if (x > y)
    singleLine();
else
{
    doThis();
    doThat();
}

for (int i = 0; i < 10; i++) statement;
```

* Слово `while` допускается не переносить на новую строку

```Java
do 
{
    doThis();
    doThat();
} while (condition);
```

* Форма тернарного оператора:

```Java
alpha = (aLongBooleanExpression) ? beta : gamma;

alpha = (aLongBooleanExpression) ? beta
                                 : gamma;

alpha = (aLongBooleanExpression)
        ? beta
        : gamma;
```

## Условия множественного выбора `switch`

* Операторы `case` должны находиться в той же колонке, что и оператор `switch`.
* Каждый случай должен заканчиваться оператором `break` (или `return`) или комментарием, чтобы показать, что далее следует другой случай.

```Java
switch (myEnum) 
{
case Value1:
    doSomething();
    break;
case Value2:
case Value3:
    doSomethingElse();
    // провалиться далее
default:
    defaultHandling();
    break;
}
```

## Обработка исключений

* Выражение типа `try-catch` должно иметь следующий вид:

```Java
try 
{
    statements;
} 
catch (ExceptionClass e) 
{
    statements;
} 
finally 
{
    doStuff();
}
```

* Не игнорируйте исключения. Чтобы отложить написание правильной обработки исключения, по меньшей мере, используйте вывод стека и `TODO`, а лучше сразу продумать корректную обработку исключения:

```Java
// Допустимо:
try
{
    ...
}
catch(Exception e)
{
    // TODO обработать ошибку!
    e.printStackTrace();
}

// Неправильно:
try
{
    ...
}
catch(Exception e)
{ }
```

## Операции

* Необходимо вставлять пробел между операциями присваивания, логическими и арифметическими операциями.

```Java
// Правильно
if (i == 0) 
{
    /* ... */;
}
a += 3;
a = b + c;

// Неправильно
if (i = = 0) 
{
    /* ... */;
}
a+ =3;
a=b+c;
```

* Не следует оставлять пробел после унарной операции.

```Java
if (!flag) 
{
    break;
}
```

## Выбор имен

* Все названия должны быть на английском языке.
* Названия пакетов должны быть написаны строчными буквами

```Java
mypackage, com.company.application.ui
```

* Названия классов должны быть существительными и написаны в PascalCase (название пишется слитно, каждое новое слово начинается с заглавной буквы).

```Java
class Raster;
class ImageSprite;
```

* Название интерфейсов должны быть существительными или прилагательными. Допускается давать названиям интерфейсов префикс I

```Java
interface IRasterDelegate;
interface IRemovable;
```

* Названия методов должны начинаться с глагола и быть написаны в camelCase (название пишется слитно и начинается со строчной буквы, каждое новое слово начинается с заглавной буквы).

```Java
initialize();
cookApplePie();
```

* Имена переменных должны быть в camelCase, либо underscore-case. Старайтесь избегать однобуквенных имен, за исключением временных «ненужных» переменных (например для счётчиков удобно использовать название `i`).

```Java
float boxWidth;
int i;

// underscore
float box_width;
```

* Имена констант должны быть написаны заглавными буквами, слова разделяются нижним подчеркиванием.

```Java
int MIN_WIDTH = 4;
int MAX_WIDTH = 999;
int CPU_COUNT = 1;
```

* поля классов должны иметь префикс `m_`. Исключения составляют константы и публичные поля классов.

```Java
class Connection
{
    private int m_bytes_sent;
    ...
}
// простой класс данных с прямым доступом к полям
class Point
{
    public int x;
    public int y;
}
```

* аргументы методов должны иметь префикс `a_`.

```Java
void connect(String a_host, int a_port)
```

* Элементы перечисляемого типа должны быть написаны заглавными буквами, слова разделяются нижним подчеркиванием.

```Java
enum Season 
{
    WINTER, SPRING, SUMMER, AUTUMN
}
```

* Следует избегать аббревиатур, кроме случаев, где аббревиатура более известна, чем полное название. Аббревиатуры должны быть в camelCase.

```Java
exportHtmlSource();
```

* В названиях переменных и методах типа `boolean` следует использовать префикс `is` или `has`.

```Java
isSet, isVisible, isFinished(), isOpen(); hasThis, hasThat
```

* Следует использовать `compute` в методах, где подсчитывается какое-то значение, `find` – в методах, где что-то ищется.

```Java
valueSet.computeAverage();
matrix.computeInverse()
vertex.findNearestVertex();
matrix.findSmallestElement();
```

* Используйте множественное число для коллекций объектов.

```Java
Collection<Point> points;
int[] values;
```

* Избегайте отрицательных префиксов для переменных и методов типа `boolean`.

```Java
// Правильно
bool isError;
bool isFound;

// Неправильно
bool isNoError;
bool isNotFound;
```

## Объявление классов и интерфейсов

* Все поля должны объявляться в начале класса.
* Классы и интерфейсы должны объявляться согласно следующему порядку:
    * Статические переменные класса в порядке `public`, `protected`, `package-private`, `private`
    * Остальные переменные класса в порядке `public`, `protected`, `package-private`, `private`
    * Конструкторы
    * Методы

## Объявление методов

* Модификаторы метода должны идти в следующем порядке:
    `<access> static abstract synchronized transient final native`.

```Java
// Правильно
public static double square(double a);

// Неправильно
static public double square(double a);
```

## Объявление полей

* Массивы следует объявлять скобками рядом с типом.

```Java
// Правильно
double[] coeffs;
int[] points;

// Неправильно
double coeffs[];
int points[];
```

## Комментирование

* Все комментарии пишутся на русском языке.
* Комментарии описывают, *что* делает код, а не *как*.
* Не стоит писать комментарии ради комментариев.
* Блоки и отдельные строки комментариев должны быть сдвинуты так же, как и окружающий их код.
* Можно использовать различные формы записи комментариев.
* Текст комментария должен быть отделен от специальных символов слева одним пробелом

```Java
// single-line comment

/*
 * multi-line
 * comment
 */

/*
 * another
 * multi-line comment */
```

* Используйте комментарии `TODO` для кода, который является временным, краткосрочным, или хорошим, но не идеальным.

```Java
// TODO переделать, используя BufferedReader
// TODO написать тест для этого алгоритма
```

* При внесении в код изменений для редких случаев и для решения проблем в специфичных ситуациях, следует снабдить комментарий датой и кратким описанием проблемы, для решения которой внесены изменения.

```Java
// 21.12.19 запуск на объекте N без графики
// добавлена проверка на отсутствие дисплея
```

## JavaDoc

* Каждый класс и `public` метод должен содержать Javadoc, по крайней мере, с одной фразой, описывающей, что он делает. Фраза должна начинаться с описательного глагола 3-го лица.

```Java
/** Возвращает округленное значение квадратного корня
 * из указанного параметра */
static double sqrt(double a) 
{
}

/**
 * Создает новую строку, конвертируя массив байт
 * в символы в кодировке по-умолчанию 
 */
public String(byte[] bytes) 
{
}
```

* Если при использовании метода необходимо выполнять какие-либо ограничения, или если действие метода имеет важный эффект в другом месте программы, **обязательно** опишите это в документации.

## Дополнительно

* Не пишите слишком длинных методов.
* Метод должен делать ровно то, что написано в его названии. Если метод делает что-либо еще, разделите его на несколько методов.
* Локальные переменные: ограничивайте область видимости.
* Следует избегать использования «магических» чисел в коде, любые числа кроме 0 и 1 должны быть записаны в константы.

```Java
// Правильно
private static final int TEAM_SIZE = 11;

...

Player[] players = new Player[TEAM_SIZE];

// Неправильно
Player[] players = new Player[11];
```

* Следует использовать аннотацию `@Override`, если метод переопределен.

```Java
@Override
public void overrideMe()
{
   doSomething();
}
```
