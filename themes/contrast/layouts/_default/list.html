{{ define "main" }}

{{ $Pages := .Pages }}

{{ if .IsHome }}
  {{ $Pages = where site.RegularPages "Type" "in" site.Params.mainSections }}
{{ end }}

<article>
  <header><h1>{{ .Title | default "Posts" }}</h1></header>
  <ul class="archive">
    {{- range $Pages }}
    <li>
      {{ if .Params.code }}<span>{{ .Params.code }}</span>{{ end }}
      <a href="{{ .Permalink }}">{{ .Title }}</a>
    </li>
    {{- end }}
  </ul>
  {{ .Content }}
</article>

{{ end }}
